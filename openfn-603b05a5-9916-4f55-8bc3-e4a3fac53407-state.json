{
  "env": "main",
  "id": "603b05a5-9916-4f55-8bc3-e4a3fac53407",
  "name": "dpga-brazil",
  "description": null,
  "color": null,
  "concurrency": 4,
  "inserted_at": "2025-09-30T06:59:34Z",
  "updated_at": "2025-10-02T14:49:21Z",
  "parent_id": null,
  "history_retention_period": 365,
  "dataclip_retention_period": null,
  "retention_policy": "retain_all",
  "scheduled_deletion": null,
  "project_credentials": {
    "international@open.gov.sg-OpenFn-Test": {
      "id": "924fcb67-909a-4490-923d-f835ac4ff5cf",
      "name": "OpenFn Test",
      "owner": "international@open.gov.sg"
    },
    "international@open.gov.sg-Sunbird-Demo-Instance": {
      "id": "830832bc-8dab-4c4e-b0ef-d6dcf5681683",
      "name": "Sunbird Demo Instance",
      "owner": "international@open.gov.sg"
    },
    "taylor@openfn.org-TD-Sunbird-RC-Test": {
      "id": "5610a2a6-51ca-4698-850d-0225ba1658f0",
      "name": "TD Sunbird RC Test",
      "owner": "taylor@openfn.org"
    },
    "taylor@openfn.org-TD-Mailgun": {
      "id": "5030d8ba-e762-4031-a39b-e5c84396bd08",
      "name": "TD Mailgun",
      "owner": "taylor@openfn.org"
    }
  },
  "version_history": [],
  "collections": {},
  "workflows": {
    "DHIS2-to-OpenCRVS-via-XRoad": {
      "id": "ad3f2915-ee42-481d-b77c-52f58cd38fc4",
      "name": "DHIS2-to-OpenCRVS-via-XRoad",
      "inserted_at": "2025-10-21T09:17:01.515973Z",
      "lock_version": 7,
      "triggers": {
        "webhook": {
          "enabled": false,
          "id": "f6b981ef-83aa-4791-856e-0d26deacf466",
          "type": "webhook"
        }
      },
      "jobs": {
        "Fetch-TEIs-from-DHIS2-via-X-Road": {
          "id": "ea924f6e-9da9-46bd-a00d-88795c31f105",
          "name": "Fetch TEIs from DHIS2 via X-Road",
          "body": "// Add operations here",
          "adaptor": "@openfn/language-dhis2@latest",
          "project_credential_id": null
        },
        "Transform-TEIs-to-National-Standard": {
          "id": "82f5a3b0-7af6-478f-a6a1-a0ca69cd609a",
          "name": "Transform TEIs to National Standard",
          "body": "// Add operations here",
          "adaptor": "@openfn/language-claude@1.0.14",
          "project_credential_id": null
        },
        "Create-IDs-in-OpenCRVS-via-X-Road": {
          "id": "01bb7820-83f1-46c3-9387-db6a96cf8bcc",
          "name": "Create IDs in OpenCRVS via X-Road",
          "body": "// Add operations here",
          "adaptor": "@openfn/language-opencrvs@latest",
          "project_credential_id": null
        },
        "analyze-error": {
          "id": "da95cfd4-d7aa-4048-8483-0d03f2857fe5",
          "name": "analyze error",
          "body": "// Add operations here",
          "adaptor": "@openfn/language-chatgpt@2.0.3",
          "project_credential_id": null
        },
        "Send-DPI-downtime-alert": {
          "id": "24125ee6-4697-4a97-9f1c-2366471e2192",
          "name": "Send DPI downtime alert",
          "body": "// Add operations here",
          "adaptor": "@openfn/language-mailgun@0.5.19",
          "project_credential_id": null
        },
        "add-to-dashboard": {
          "id": "be681c9f-9ff6-4616-84b1-9fa4b999480a",
          "name": "add to dashboard",
          "body": "// Check out the Job Writing Guide for help getting started:\n// https://docs.openfn.org/documentation/jobs/job-writing-guide\n",
          "adaptor": "@openfn/language-azure-storage@3.0.2",
          "project_credential_id": null
        }
      },
      "edges": {
        "webhook->Fetch-TEIs-from-DHIS2-via-X-Road": {
          "enabled": true,
          "id": "078ae3e2-b8ff-4872-98eb-79deb878f93b",
          "target_job_id": "ea924f6e-9da9-46bd-a00d-88795c31f105",
          "source_trigger_id": "f6b981ef-83aa-4791-856e-0d26deacf466",
          "condition_type": "always"
        },
        "Fetch-TEIs-from-DHIS2-via-X-Road->Transform-TEIs-to-National-Standard": {
          "enabled": true,
          "id": "3018358b-36b2-4b5f-9ee5-420e0098378e",
          "target_job_id": "82f5a3b0-7af6-478f-a6a1-a0ca69cd609a",
          "source_job_id": "ea924f6e-9da9-46bd-a00d-88795c31f105",
          "condition_type": "on_job_success"
        },
        "Transform-TEIs-to-National-Standard->Create-IDs-in-OpenCRVS-via-X-Road": {
          "enabled": true,
          "id": "04a6254b-d384-4af4-b2f0-28ecf746f51c",
          "target_job_id": "01bb7820-83f1-46c3-9387-db6a96cf8bcc",
          "source_job_id": "82f5a3b0-7af6-478f-a6a1-a0ca69cd609a",
          "condition_type": "on_job_success"
        },
        "Fetch-TEIs-from-DHIS2-via-X-Road->analyze-error": {
          "enabled": true,
          "id": "c719c036-59b7-4353-b30d-e0d9267d5507",
          "target_job_id": "da95cfd4-d7aa-4048-8483-0d03f2857fe5",
          "source_job_id": "ea924f6e-9da9-46bd-a00d-88795c31f105",
          "condition_type": "on_job_failure"
        },
        "Transform-TEIs-to-National-Standard->analyze-error": {
          "enabled": true,
          "id": "e728a06d-9d58-46d4-a7bd-ad0c1f069671",
          "target_job_id": "da95cfd4-d7aa-4048-8483-0d03f2857fe5",
          "source_job_id": "82f5a3b0-7af6-478f-a6a1-a0ca69cd609a",
          "condition_type": "on_job_failure"
        },
        "Create-IDs-in-OpenCRVS-via-X-Road->analyze-error": {
          "enabled": true,
          "id": "99be9b03-3113-4c51-86c0-a78ece6c8f65",
          "target_job_id": "da95cfd4-d7aa-4048-8483-0d03f2857fe5",
          "source_job_id": "01bb7820-83f1-46c3-9387-db6a96cf8bcc",
          "condition_type": "on_job_failure"
        },
        "analyze-error->Send-DPI-downtime-alert": {
          "enabled": true,
          "id": "a154977c-6b95-4faf-af65-7d931b6f6459",
          "target_job_id": "24125ee6-4697-4a97-9f1c-2366471e2192",
          "source_job_id": "da95cfd4-d7aa-4048-8483-0d03f2857fe5",
          "condition_type": "on_job_success"
        },
        "analyze-error->add-to-dashboard": {
          "enabled": true,
          "id": "33f27377-d997-44b9-8ab4-e5b046b2082c",
          "target_job_id": "be681c9f-9ff6-4616-84b1-9fa4b999480a",
          "source_job_id": "da95cfd4-d7aa-4048-8483-0d03f2857fe5",
          "condition_type": "on_job_success"
        }
      }
    },
    "FormSG-and-Sunbird-RC": {
      "id": "a586690c-9bce-480f-9dc3-f560d531a9fc",
      "name": "FormSG and Sunbird RC",
      "inserted_at": "2025-11-02T17:03:11.647200Z",
      "lock_version": 99,
      "triggers": {
        "webhook": {
          "enabled": true,
          "id": "45ce7b6b-545e-42e2-9021-885484809f25",
          "type": "webhook"
        }
      },
      "jobs": {
        "Verify-and-Decrypt-Responses": {
          "id": "4482c977-a4b1-41a3-b77f-ffc510e8d2e2",
          "name": "Verify and Decrypt Responses",
          "body": "decryptSubmission($.data.data, {\n  verifySignature: true,\n  signatureHeader: $.request.headers['x-formsg-signature']\n})",
          "adaptor": "@openfn/language-formsg@1.0.1",
          "project_credential_id": "924fcb67-909a-4490-923d-f835ac4ff5cf"
        },
        "Transform-Form-Data-and-Fetch-Course-Score": {
          "id": "5373fcb3-9c55-4a6d-86eb-42496a84acc2",
          "name": "Transform Form Data and Fetch Course Score",
          "body": "function getAnswer(responses, label) {\n  const f = responses.find(r => r.question === label);\n  return f ? f.answer : null;\n}\n\nfunction generateDemoGrade() {\n  const base = 8.5 + Math.random() * 1.4; // 8.5 â€“ 9.9\n  const rounded = Math.round(base * 100) / 100;\n  return `${rounded} / 10 (Distinction)`;\n}\n\nfn(state => {\n  const responses = state.data.responses || state.data.data?.responses || [];\n\n  const name = getAnswer(responses, 'Name') || 'Learner';\n  const email = getAnswer(responses, 'Email') || 'unknown@example.com';\n  const phone = getAnswer(responses, 'Mobile') || '+65-0000-0000';\n  const programme = getAnswer(responses, 'Course') || 'Data Analytics';\n\n  \n// In real life use cases, this is fetched from an external system\n// But for simplicity of demo: just generate it here as mocked data\n  const grade = generateDemoGrade();\n\n  const normalized = {\n    name,\n    email,\n    phone,\n    programme,\n    grade\n  };\n\n  return { ...state, normalized };\n});\n",
          "adaptor": "@openfn/language-common@latest",
          "project_credential_id": null
        },
        "Issue-a-Verifiable-Credential": {
          "id": "651b69ee-f927-42a8-8cce-712a8f1c96de",
          "name": "Issue a Verifiable Credential",
          "body": "issueCredential({\n  credential: {\n    \"@context\": [\n      \"https://www.w3.org/2018/credentials/v1\",\n      \"https://littlemight.github.io/sunbird-demo-vc-context/demo-context.json\"\n    ],\n    \"type\": [\n      \"VerifiableCredential\",\n      \"ProofOfAcademicEvaluationCredential\"\n    ],\n    \"issuer\": \"did:web:example.com:identifier:9536bc3b-3f4b-4cec-8c48-f67c9c4d63fc\",\n    \"issuanceDate\": new Date().toISOString(),\n    \"expirationDate\": new Date(new Date().setFullYear(new Date().getFullYear() + 2)).toISOString(),\n    \"credentialSubject\": {\n      \"id\": \"did:schema:7b2fc25c-b7f6-40b5-bee4-d95bb5924450\",\n      \"type\": \"ProofOfAcademicEvaluationCredential\",\n      \"name\": $.normalized.name,\n      \"grade\": $.normalized.grade,\n      \"programme\": $.normalized.programme,\n      \"certifyingInstitute\": \"YourSkillsFuture Council\",\n      \"evaluatingInstitute\": \"Institute of Digital Learning, India\",\n    }\n  },\n  \"credentialSchemaId\": \"did:schema:7b2fc25c-b7f6-40b5-bee4-d95bb5924450\",\n  \"credentialSchemaVersion\": \"1.0.0\",\n  \"tags\": [\"demo\", \"education\", \"cross-border\"]\n})",
          "adaptor": "@openfn/language-sunbird-rc@1.0.1",
          "project_credential_id": "5610a2a6-51ca-4698-850d-0225ba1658f0"
        },
        "Fetch-certificate-as-PDF": {
          "id": "5938ec99-a16a-493e-8d83-4aafd10f1dea",
          "name": "Fetch certificate as PDF",
          "body": "fn(state => ({ ...state, credentialId: state.data.credential.id }));\n\ngetCredential($.credentialId, {\n  templateId: 'cmhct2djx001ems0j0pxlg1qc',\n});\n\nfn(state => ({ ...state, proof: state.data }));\n\ndownloadCredential($.credentialId, {\n  templateId: 'cmhct2djx001ems0j0pxlg1qc',\n});",
          "adaptor": "@openfn/language-sunbird-rc@1.0.1",
          "project_credential_id": "5610a2a6-51ca-4698-850d-0225ba1658f0"
        },
        "Deliver-to-citizen": {
          "id": "7c5e6bfc-49ed-4c09-8980-f984e4d36d32",
          "name": "Deliver to citizen",
          "body": "send({\n  from: 'admin@openfn.org',\n  to: $.normalized.email,\n  cc: [\n    'taylor@openfn.org',\n    'cheryl@open.gov.sg',\n    'michel@open.gov.sg',\n    'kartheek@sanketika.in',\n    'jack@openfn.org',\n    'pius@openfn.org',\n    'mohit@coss.org.in',\n  ],\n  subject: 'âœ¨ You have a new verifiable credential! âœ…',\n  html: `<!DOCTYPE html>\n    <html>\n    <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    </head>\n    <body style=\"font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;\">\n        <p>Dear ${$.normalized.name},</p>\n        \n        <p>ğŸ¥³ Congratulations ğŸ‰ on your new verifiable credential! The deatils are below and a PDF version is attached to this email.</p>\n        \n        <p><strong>Subject:</strong></p>\n        <ul style=\"background-color: #f4f4f4; padding: 20px; border-radius: 5px;\">\n            ${Object.entries(state.proof.credentialSubject).map(([key, value]) => \n                `<li><strong>${key}:</strong> ${typeof value === 'object' ? JSON.stringify(value) : value}</li>`\n            ).join('')}\n        </ul>\n        \n        <p><strong>Proof:</strong></p>\n        <ul style=\"background-color: #f4f4f4; padding: 20px; border-radius: 5px;\">\n            ${Object.entries(state.proof.proof).map(([key, value]) => \n                `<li><strong>${key}:</strong> ${typeof value === 'object' ? JSON.stringify(value) : value}</li>`\n            ).join('')}\n        </ul>\n        \n        <p>Best,<br>\n        Your Government</p>\n        \n        <p style=\"color: #666;\"><em>Powered ğŸ‡¸ğŸ‡¬ FormSG and ğŸ‡®ğŸ‡³ SunbirdRC. Automated by ğŸŒ OpenFn.</em></p>\n    </body>\n    </html>`,\n  attachment: {\n    filename: 'credential.pdf',\n    data: $.data\n  },\n});",
          "adaptor": "@openfn/language-mailgun@0.6.0",
          "project_credential_id": "5030d8ba-e762-4031-a39b-e5c84396bd08"
        },
        "Notify-if-invalid": {
          "id": "3dba64e0-305f-4a13-899f-5c2abb87baa6",
          "name": "Notify if invalid",
          "body": "send({\n  from: 'admin@openfn.org',\n  to: ['taylor@openfn.org'],\n  subject: 'Could not issue credential',\n  text: 'We could not issue a verifiable credential for: \\n\\n'\n    + `Subject: ${JSON.stringify($.data.normalized, null, 2)}\\n\\n`\n    + `Best,\\n`\n    + `Your Government`\n});",
          "adaptor": "@openfn/language-mailgun@0.6.0",
          "project_credential_id": "5030d8ba-e762-4031-a39b-e5c84396bd08"
        },
        "Alert-institution-credential-issuance": {
          "id": "a7739466-2f65-4183-85e5-29557a30787a",
          "name": "Alert institution credential issuance",
          "body": "send({\n  from: 'admin@openfn.org',\n  to: [\n    'taylor@openfn.org',\n    'cheryl@open.gov.sg',\n    'michel@open.gov.sg',\n    'kartheek@sanketika.in',\n    'jack@openfn.org',\n    'pius@openfn.org',\n    'mohit@coss.org.in',\n  ],\n  subject: 'New credential issued',\n  text: 'A new credential has just been issued: \\n\\n'\n    + `Subject: ${JSON.stringify($.proof.credentialSubject, null, 2)}\\n\\n`\n    + `Proof: ${JSON.stringify($.proof.proof, null, 2)}\\n\\n`\n    + `Best,\\n`\n    + `Your Government`\n});",
          "adaptor": "@openfn/language-mailgun@0.6.0",
          "project_credential_id": "5030d8ba-e762-4031-a39b-e5c84396bd08"
        }
      },
      "edges": {
        "webhook->Verify-and-Decrypt-Responses": {
          "enabled": true,
          "id": "b125dbc3-e67f-4ab6-b112-c88568becb3c",
          "target_job_id": "4482c977-a4b1-41a3-b77f-ffc510e8d2e2",
          "source_trigger_id": "45ce7b6b-545e-42e2-9021-885484809f25",
          "condition_type": "always"
        },
        "Verify-and-Decrypt-Responses->Transform-Form-Data-and-Fetch-Course-Score": {
          "enabled": true,
          "id": "968ceeb5-c5a2-4886-8de4-abc07b12faa3",
          "target_job_id": "5373fcb3-9c55-4a6d-86eb-42496a84acc2",
          "source_job_id": "4482c977-a4b1-41a3-b77f-ffc510e8d2e2",
          "condition_type": "on_job_success"
        },
        "Transform-Form-Data-and-Fetch-Course-Score->Issue-a-Verifiable-Credential": {
          "enabled": true,
          "id": "df994ff0-8893-41ab-8ef6-b74a55927619",
          "target_job_id": "651b69ee-f927-42a8-8cce-712a8f1c96de",
          "source_job_id": "5373fcb3-9c55-4a6d-86eb-42496a84acc2",
          "condition_type": "on_job_success"
        },
        "Issue-a-Verifiable-Credential->Fetch-certificate-as-PDF": {
          "enabled": true,
          "id": "d8ac23dd-b656-4773-85e1-72fd4fed9e66",
          "target_job_id": "5938ec99-a16a-493e-8d83-4aafd10f1dea",
          "source_job_id": "651b69ee-f927-42a8-8cce-712a8f1c96de",
          "condition_type": "on_job_success"
        },
        "Fetch-certificate-as-PDF->Deliver-to-citizen": {
          "enabled": true,
          "id": "321cff88-f684-4a25-842e-b45669b226d3",
          "target_job_id": "7c5e6bfc-49ed-4c09-8980-f984e4d36d32",
          "source_job_id": "5938ec99-a16a-493e-8d83-4aafd10f1dea",
          "condition_type": "on_job_success"
        },
        "Issue-a-Verifiable-Credential->Notify-if-invalid": {
          "enabled": true,
          "id": "aaa74f73-9444-4ecd-87bd-86ea48d7f27a",
          "target_job_id": "3dba64e0-305f-4a13-899f-5c2abb87baa6",
          "source_job_id": "651b69ee-f927-42a8-8cce-712a8f1c96de",
          "condition_type": "on_job_failure"
        },
        "Fetch-certificate-as-PDF->Alert-institution-credential-issuance": {
          "enabled": false,
          "id": "167fdeab-b284-4bac-8eb1-4f6891ea2e95",
          "target_job_id": "a7739466-2f65-4183-85e5-29557a30787a",
          "source_job_id": "5938ec99-a16a-493e-8d83-4aafd10f1dea",
          "condition_type": "on_job_success"
        }
      }
    }
  },
  "allow_support_access": false,
  "requires_mfa": false
}